/*
	UIZE JAVASCRIPT FRAMEWORK 2011-03-10

	http://www.uize.com/reference/Uize.Widget.Options.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Widget.Options',required:'Uize.Widget.Button',builder:function(c_a){var c_b;var c_c=c_a.subclass(null,function(){this.c_d= -1;this.c_e=0;}),c_f=c_c.prototype;c_f.c_g=function(){var c_h=this;c_h.set({c_i:c_h.getValueNoFromValue(c_h.c_j)});c_h.updateUi();};c_f.forAll=function(c_k){for(var c_i= -1,c_l=this.c_m.length,c_n=this.children;++c_i<c_l;)if(c_k(c_n['option'+c_i],c_i)===false)break;;};c_f.getValueNoFromValue=function(c_j){var c_m=this.c_m;return(c_m.length?(typeof c_m[0]=='object'?Uize.findRecordNo(c_m,{name:c_j}):Uize.indexIn(c_m,c_j,false,false)): -1);};c_f.updateUi=function(){var c_h=this;if(c_h.isWired&&c_h.c_i!=c_h.c_d){function c_o(c_p,c_q){c_p>=0&&Uize.callOn(c_h.children['option'+c_p],'set',[{selected:c_q}]);}c_o(c_h.c_d,false);c_o(c_h.c_d=c_h.c_i,true);}};c_f.wireUi=function(){var c_h=this;if(!c_h.isWired){c_h.c_i= -1;var c_r=c_h.c_r||Uize.Widget.Button,c_s=c_h.c_s,c_m=c_h.c_m,c_l=c_h.c_e=c_m.length,c_t,c_u;function c_v(){c_t=null;c_h.set({c_w:c_h.c_j,c_x:c_h.c_i});}
function c_y(){c_t&&clearTimeout(c_t);c_u&&clearTimeout(c_u);}function c_z(c_i){var c_A=c_m[c_i],c_j=((typeof c_A=='object'&&c_A)||(c_A={name:c_A})).name;function c_B(){c_h.set(c_h.c_C?{c_j:c_j}:{c_w:c_j,c_x:c_i});}c_h.addChild('option'+c_i,c_r,c_A.enabled===false?Uize.copyInto({},c_s,{enabled:false}):c_s).wire('*',function(c_D){if(c_D.name=='Click'){c_h.fire({name:'Before Value Change',value:c_j,valueNo:c_i}).cancel||c_h.set({c_j:c_j});c_h.fire(c_D);}else if(c_D.name=='Over'){c_y();c_h.c_E?(c_u=setTimeout(c_B,c_h.c_E)):c_B();}else if(c_D.name=='Out'){c_y();c_t=setTimeout(c_v,250);}c_h.fire({name:'Option Event',value:c_j,childEvent:c_D});});}for(var c_i= -1;++c_i<c_l;)c_z(c_i);if(c_l){var c_F=c_h.getNode();if(c_F){for(var c_G= -1,c_H,c_I,c_J,c_K=c_F.childNodes||[],c_L=c_K.length,c_n=c_h.children,c_M=c_h.get('idPrefix'),c_N=c_M.length;++c_G<c_L;){if((c_I=(c_H=c_K[c_G]).id)&& !c_I.indexOf(c_M)&&(c_J=c_n[c_I.slice(c_N+1)]))c_J.set({nodeMap:{'':c_H,shell:null,bed:null}});}}}c_a.prototype.wireUi.call(c_h);
c_h.c_g();}};c_c.registerProperties({c_r:'optionWidgetClass',c_s:'optionWidgetProperties',c_C:'setValueOnMouseover',c_E:{name:'tentativeRestTime',value:0},c_w:{name:'tentativeValue',value:null},c_x:{name:'tentativeValueNo',value:-1},c_j:{name:'value',onChange:function(){var c_h=this;c_h.c_g();c_h.set({c_x:c_h.c_i,c_w:c_h.c_j});},value:null},c_i:{name:'valueNo',value:-1},c_m:{name:'values',onChange:function(){var c_h=this;if(c_h.isWired){for(var c_i= -1,c_e=c_h.c_e||0;++c_i<c_e;)c_h.removeChild('option'+c_i);c_h.unwireUi();c_h.get('html')!=c_b&&c_h.set({built:false});c_h.insertOrWireUi();}},value:[]}});return c_c;}});